<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Tags suggestions - Stackoverflow</title>
  <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>
  <link rel="stylesheet" type="text/css" href="/static/style.css">
  <link rel="shortcut icon" href="/static/img/favicon.ico">
</head>

<body>
  <div class="content">
    <header>
      <img src="/static/img/stack_logo.png" alt="Stackoverflow" width="200" height="53">
      <h1>
        Tags suggestions
      </h1>
    </header>
  </div>

  <div id="form">
    <form action="/tags" method="post">
      <div>
        <textarea id="question" name="user_question" placeholder="Type your question..."
          required="required">{{question}}</textarea>
      </div>

      <div class="button">
        <button class="bt" type="submit">Get tags</button>
      </div>
    </form>
  </div>

  <div class="space_tag">
    <script>
      function tagger(lst, id, style) {
        lst.forEach(element => {
          var newBut = document.createElement("button");
          var newButContent = document.createTextNode(element);
          newBut.appendChild(newButContent);
          newBut.setAttribute("class", style)
          var currentDiv = document.getElementById(id);
          document.body.insertBefore(newBut, currentDiv.nextSibling);
        });
      }
      function H2(title, parent_id, id) {
        var newH2 = document.createElement("h2");
        var newH2Content = document.createTextNode(title);
        newH2.appendChild(newH2Content);
        newH2.setAttribute("id", id)
        var currentDiv = document.getElementById(parent_id);
        document.body.insertBefore(newH2, currentDiv.nextSibling);

      }

      if ('{{unsup}}') {
        var sup_tag = '{{sup}}'.split(',')
        var unsup_tag = '{{unsup}}'.split(',')

        H2("Supervised tags", "form", "sup")
        H2("Unsupervised tags", "sup", "unsup")

        if ('{{sup}}') {
          tagger(sup_tag, "sup", "bt_tag")
        } else { tagger(["no supervised tag"], "sup", "bt_notag") }
        
        tagger(unsup_tag, "unsup", "bt_tag")
      }

    </script>
  </div>
</body>
</html>